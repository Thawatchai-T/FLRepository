/*
 * File: app/view/Financial/FinancialAmountDetail.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('TabUserInformation.view.Financial.FinancialAmountDetail', {
    extend: 'Ext.window.Window',
    alias: 'widget.financialfinancialamountdetail',

    requires: [
        'TabUserInformation.view.Financial.FinancialAmountDetailViewModel',
        'TabUserInformation.view.Financial.FinancialAmountDetailViewController',
        'Ext.toolbar.Toolbar',
        'Ext.button.Button',
        'Ext.form.field.ComboBox',
        'Ext.form.field.Number',
        'Ext.form.field.Display',
        'Ext.slider.Single',
        'Ext.form.RadioGroup',
        'Ext.form.field.Radio',
        'Ext.grid.Panel',
        'Ext.grid.column.RowNumberer',
        'Ext.view.Table'
    ],

    controller: 'financialfinancialamountdetail',
    viewModel: {
        type: 'financialfinancialamountdetail'
    },
    id: 'financialamountdetail',
    bodyPadding: 10,
    title: 'ประเภททรัพย์สินพร้อมรายละเอียดการผ่อนชำระ',
    modal: true,
    maximized: true,
    autoScroll: true,
    session: true,
    //itemId: 'windowCtrl',

    buttons: [
        {
            xtype: 'button',
            dock: 'bottom',
            glyph: 'xf0c7@FontAwesome',
            text: 'Save',
            listeners: {
                click: 'onButtonSaveClick'
            }
        }
    ],
    items: [
        {
            xtype: 'hiddenfield',
            itemId: 'MasterPage',
        },
        {
            xtype: 'form',
            itemId: 'formMain',
            layout: {
                type: 'vbox',
                align: 'stretch'
            },
            trackResetOnLoad: true,
            items: [
                {
                    xtype: 'hiddenfield',
                    name: 'save',
                    value: 'N'
                },
                {
                    xtype: 'hiddenfield',
                    name: 'Id',
                },
                {
                    xtype: 'fieldset',
                    title: 'ทรัพย์สิน',
                    layout: {
                        type: 'table',
                        columns: 1
                    },
                    defaults: {
                        labelAlign: 'right',
                        labelWidth: 250,
                        width: 550,
                        allowBlank: false,
                        forceSelection: true
                    },
                    items: [
                        {
                            xtype: 'radiogroup',
                            colspan: 2,
                            fieldLabel: 'ทรัพย์ใหม่ / ทรัพย์ใช้แล้ว',
                            itemId: 'AssetType',
                            defaults: {
                                margin: '0 5 0 0'
                            },
                            layout: {
                                type: 'hbox',
                                align: 'stretch'
                            },
                            items: [
                                {
                                    xtype: 'radiofield',
                                    boxLabel: 'ทรัพย์ใหม่',
                                    name: 'AssetType',
                                    inputValue: 'new',
                                    checked: true
                                },
                                {
                                    xtype: 'radiofield',
                                    boxLabel: 'ทรัพย์ใช้แล้ว',
                                    name: 'AssetType',
                                    inputValue: 'used'
                                }
                            ]
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'ทรัพย์สินหลัก',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            bind: {
                                store: '{MainAssets}'
                            },
                            valueField: 'Id',
                            name: 'MainAsset',
                            listeners: {
                                change: 'onComboboxMainAssetChange'
                            },
                            matchFieldWidth: false
                        },
                        {
                            xtype: 'combobox',
//                            labelWidth: 150,
//                            width: 450,
                            fieldLabel: 'รายละเอียดทรัพย์สิน',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            valueField: 'Id',
                            name: 'SubAsset',
                            bind: {
                                store: '{SubAssets}'
                            },
                            listeners: {
                                change: 'onComboboxSubAssetChange'
                            },
                            disabled: true,
                            matchFieldWidth: false
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'กำหนดรายละเอียดทรัพย์สิน',
                            autoLoadOnValue: true,
                            displayField: 'IdAndName',
                            valueField: 'Id',
                            name: 'DetailAsset',
                            bind: {
                                store: '{DetailAssets}'
                            },
                            disabled: true,
                            matchFieldWidth: false
                        },
                        {
                            xtype: 'combobox',
//                            labelWidth: 150,
//                            width: 450,
                            fieldLabel: 'เงื่อนไขเพิ่มเติม',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.otherConditions',
                            valueField: 'Id',
                            name: 'Marketable',
                            disabled: true
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    title: 'วงเงิน',
                    //ui: 'light',
                    //title: 'ทรัพย์ใหม่',
                    titleAlign: 'right',
                    layout: {
                        type: 'table',
                        columns: 2
                    },
                    defaults: {
                        labelAlign: 'right',
                        labelWidth: 250,
                        allowBlank: false,
                        width: 500,
                        forceSelection: true
                    },
                    items: [
                        {
                            xtype: 'numberfield',
                            fieldLabel: 'กรณีระบุวงเงินที่ได้รับอนุมัติ',
                            name: 'Amount',
                            mouseWheelEnabled:false,
                            hideTrigger: true,
                            hidden: true,
                            bind: {
                                value: '{Amount}',
                                maxValue: '{MaxAmount}'
                            }
                        },
                        {
                            xtype: 'displayfield',
                            fieldLabel: 'วงเงินคงเหลือที่สามารถเบิกใช้ได้',
                            value: 'Display Field',
                            name: 'Total',
                            renderer: function (value, displayField) {
                                return Ext.util.Format.number(value, '0,000.00');
                            }
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'เงินดาวน์/ค่าเช่าเริ่มต้น/วางประกัน',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.DownHireInsurances',
                            valueField: 'Id',
                            name: 'DownHireInsurance',
                            bind: '{DownHireInsurance}'
                        },
                        {
                            xtype: 'fieldcontainer',
                            fieldLabel: 'อัตราเงินดาวน์(%)',
                            layout: {
                                type: 'hbox',
                                align: 'stretch'
                            },
                            itemId: 'DownRate',
                            bind: {
                                disabled: '{CheckDown}'
                            },
                            items: [
                                {
                                    xtype: 'numberfield',
                                    width: 60,
                                    name: 'DownRate',
                                    minValue: 0,
                                    maxValue: 100,
                                    hideTrigger: true,
                                    mouseWheelEnabled:false
                                },
                                {
                                    xtype: 'label',
                                    text: '%',
                                    padding: 5
                                }
                            ]
                        },
                        {
                            xtype: 'fieldcontainer',
                            fieldLabel: 'มูลค่าซาก',
                            colspan: 2,
                            layout: {
                                type: 'hbox',
                                align: 'stretch'
                            },
                            itemId: 'ScrapValue',
                            hidden: true,
                            defaults: {
                                hideTrigger: true,
                                mouseWheelEnabled:false,
                                allowBlank: false
                            },
                            items: [
                                {
                                    xtype: 'numberfield',
                                    name: 'ScrapValue',
                                    width: 100
                                },
                                {
                                    xtype: 'label',
                                    text: 'บาท',
                                    padding: 5
                                },
                                {
                                    xtype: 'numberfield',
                                    width: 60,
                                    name: 'ScrapPercent',
                                    minValue: 0,
                                    maxValue: 100
                                },
                                {
                                    xtype: 'label',
                                    text: '%',
                                    padding: 5
                                }
                            ]
                        },
                        {
                            xtype: 'numberfield',
                            fieldLabel: 'flat rate ไม่ต่ำกว่า',
                            name: 'FlatRate',
                            hideTrigger: true,
                            allowBlank: true
                        },
                        {
                            xtype: 'fieldcontainer',
                            fieldLabel: 'เทียบเท่า eff. Rate KTB MLR',
                            layout: {
                                type: 'hbox',
                                align: 'stretch'
                            },
                            items: [
                                {
                                    xtype: 'numberfield',
                                    width: 60,
                                    name: 'EffectiveRate',
                                    minValue: -100,
                                    maxValue: 100,
                                    hideTrigger: true,
                                    mouseWheelEnabled:false
                                },
                                {
                                    xtype: 'label',
                                    text: '%',
                                    padding: 5
                                }
                            ]
                        },
                        {
                            xtype: 'displayfield',
                            fieldLabel: 'KTB MLR ณ ปัจจุบัน',
                            name: 'KTBMLR'
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'ระยะเวลาการผ่อนชำระ(ไม่เกิน)',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.terms',
                            valueField: 'Id',
                            name: 'Term'
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'รูปแบบการผ่อนชำระ',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.termStyles',
                            valueField: 'Id',
                            name: 'TermStyle',
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'วิธีการชำระ',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.methodPayment',
                            valueField: 'Id',
                            name: 'MethodPayment',
                            listeners: {
                                select: 'onComboboxMethodPaymentSelect'
                            },
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'เงื่อนไขการเก็บเช็ค',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.chequeConditions',
                            valueField: 'Id',
                            name: 'ChequeCondition',
                            allowBlank: true
                        },

                    ]
                },
                {
                    xtype: 'fieldset',
                    padding: 5,
                    //width: 450,
                    layout: {
                        type: 'vbox',
                        align: 'stretch'
                    },
                    title: 'ผู้ค้ำประกัน',
                    items: [
                        {
                            xtype: 'gridpanel',
                            itemId: 'gridGuarantor',
                            height: 170,
                            width: 850,
                            title: '',
//                            store: 'guarantorModels',
                            bind: '{guarantorModels}',
                            columnLines: true,
                            columns: [
                                {
                                    xtype: 'rownumberer'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    text: 'ชื่อลูกค้า',
                                    dataIndex: 'FullNameTh',
                                    flex: -1
                                },
                                {
                                    xtype: 'gridcolumn',
                                    text: 'เลขบัตรประจำตัวประชาชน/เลขประจำตัวผู้เสียภาษี',
                                    dataIndex: 'TaxNo',
                                    flex: -1
                                }
                            ],
                            listeners: {
                                itemdblclick: 'onGridpanelGuarantorItemDblClick'
                            },
                            dockedItems: [
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            glyph: 'xf067@FontAwesome',
                                            text: 'Add',
                                            listeners: {
                                                click: 'onButtonGuarantorAddClick'
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            glyph: 'xf014@FontAwesome',
                                            text: 'Delete',
                                            listeners: {
                                                click: 'onButtonDeleteClick'
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'container',
                    layout: {
                        type: 'hbox',
                        align: 'stretch'
                    },
                    items: [
                        {
                            xtype: 'fieldset',
                            title: 'การประกันภัย',
                            layout: {
                                type: 'table',
                                columns: 1
                            },
                            defaults: {
                                labelAlign: 'right',
                                labelWidth: 250,
                                allowBlank: false,
                                forceSelection: true
                            },
                            items: [
                                {
                                    xtype: 'combobox',
                                    fieldLabel: 'การประกันภัยทรัพย์สิน',
                                    autoLoadOnValue: true,
                                    displayField: 'Name',
                                    store: 'CommonData.timeInsurances',
                                    valueField: 'Id',
                                    name: 'Insurance',
                                },
                                {
                                    xtype: 'combobox',
                                    fieldLabel: 'การประกันภัยทรัพย์สินโดย',
                                    autoLoadOnValue: true,
                                    displayField: 'Name',
                                    store: 'CommonData.insurances',
                                    valueField: 'Id',
                                    name: 'InsuranceBy'
                                }
                            ]
                        },
                        {
                            xtype: 'fieldset',
                            title: 'การจดทะเบียนทรัพย์สิน',
                            layout: {
                                type: 'table',
                                columns: 2
                            },
                            defaults: {
                                labelAlign: 'right',
                                labelWidth: 150,
                                allowBlank: false,
                                forceSelection: true
                            },
                            items: [
                                {
                                    xtype: 'combobox',
                                    fieldLabel: 'การจดทะเบียนทรัพย์สิน',
                                    autoLoadOnValue: true,
                                    displayField: 'Name',
                                    store: 'CommonData.regists',
                                    valueField: 'Id',
                                    name: 'RegisterCapital',
                                },
                                {
                                    xtype: 'combobox',
                                    fieldLabel: 'การจดทะเบียนทรัพย์สินโดย',
                                    autoLoadOnValue: true,
                                    displayField: 'Name',
                                    store: 'CommonData.insurances',
                                    valueField: 'Id',
                                    name: 'RegisterCapitalBy'
                                },
                                {
                                    xtype: 'combobox',
                                    fieldLabel: 'ดำเนินการกับหน่วยงานใด',
                                    autoLoadOnValue: true,
                                    displayField: 'Name',
                                    store: 'CommonData.registAgencies',
                                    valueField: 'Id',
                                    name: 'RegisterCapitalAgency'
                                }
                            ]
                        },
                    ]
                },
                {
                    xtype: 'container',
                    layout: {
                        type: 'vbox',
                        pack: 'center'
                    },
                    defaults: {
                        labelAlign: 'right',
                        labelWidth: 250
                    },
                    items: [
                        {
                            xtype: 'textareafield',
                            fieldLabel: 'เงื่อนไขอื่นๆ',
                            name: 'OtherCondition',
                            width: 800,
                            padding: 10,
                        }
                    ]
                }
            ]
        }
    ],
    listeners: {
        beforeclose: 'onBeforeClose',
        close: 'onClose'
    }

});