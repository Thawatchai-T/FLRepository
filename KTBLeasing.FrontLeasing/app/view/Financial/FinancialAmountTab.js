/*
 * File: app/view/Financial/FinancialAmountTab.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('TabUserInformation.view.Financial.FinancialAmountTab', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.financialfinancialamounttab',

    requires: [
        'TabUserInformation.view.Financial.FinancialAmountTabViewModel',
        'TabUserInformation.view.Financial.FinancialAmountTabViewController',
        'Ext.form.Panel',
        'Ext.grid.Panel',
        'Ext.view.Table',
        'Ext.grid.column.Date',
        'Ext.grid.column.Number',
        'Ext.toolbar.Paging'
    ],

    controller: 'financialfinancialamounttab',
    viewModel: {
        type: 'financialfinancialamounttab'
    },
    id: 'financialamounttab',
    layout: 'border',
    title: 'ตั้งวงเงิน',
    session: true,

    items: [
        {
            xtype: 'form',
            region: 'north',
            bodyPadding: 10,
            collapsible: true,
            title: 'ค้นหา',
            layout: {
                type: 'vbox',
                align: 'center'
            },
            items: [
                {
                    xtype: 'container',
                    defaults: {
                        labelWidth: 100,
                        labelAlign: 'right',
                        width: 325
                    },
                    layout: {
                        type: 'table',
                        columns: 6
                    },
                    items: [
                        {
                            xtype: 'numberfield',
                            colspan: 2,
                            fieldLabel: 'Application No',
                            labelAlign: 'right',
                            name: 'Id',
                            hideTrigger: true
                        },
                        {
                            xtype: 'combobox',
                            colspan: 2,
                            fieldLabel: 'ประเภทวงเงิน',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.limits',
                            valueField: 'Id',
                            name: 'Limit'
                        },
                        {
                            xtype: 'combobox',
                            colspan: 2,
                            fieldLabel: 'สายงาน',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.marketingGroups',
                            valueField: 'Id',
                            name: 'MarketingGroup',
                            listeners: {
                                change: 'onComboboxMarketingGroupChange'
                            }
                        },
                        {
                            xtype: 'combobox',
                            colspan: 2,
                            fieldLabel: 'ประเภทลูกค้า',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.typeCustomers',
                            valueField: 'Id',
                            name: 'CustType'
                        },
                        {
                            xtype: 'numberfield',
                            width: 205,
                            fieldLabel: 'วงเงิน',
                            labelAlign: 'right',
                            name: 'StartAmount',
                            mouseWheelEnabled:false,
                            hideTrigger: true
                        },
                        {
                            xtype: 'numberfield',
                            width: 120,
                            fieldLabel: '-',
                            labelAlign: 'right',
                            labelSeparator: ' ',
                            labelWidth: 15,
                            name: 'EndAmount',
                            mouseWheelEnabled:false,
                            hideTrigger: true
                        },
                        {
                            xtype: 'combobox',
                            colspan: 2,
                            fieldLabel: 'สำนักงานภูมิภาค',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.branchs',
                            valueField: 'Id',
                            name: 'Branch'
                        },
                        {
                            xtype: 'textfield',
                            colspan: 2,
                            fieldLabel: 'ชื่อ - นามสกุล',
                            labelAlign: 'right',
                            name: 'CustFullName'
                        },
                        {
                            xtype: 'combobox',
                            colspan: 2,
                            fieldLabel: 'ประเภทสินเชื่อ',
                            autoLoadOnValue: true,
                            displayField: 'Name',
                            store: 'CommonData.typeLeasings',
                            valueField: 'Id',
                            name: 'TypeLeasing'
                        },
                        {
                            xtype: 'datefield',
                            width: 205,
                            fieldLabel: 'วันที่อนุมัติ',
                            labelAlign: 'right',
                            labelSeparator: ' ',
                            name: 'StartDate',
                            format: 'd/m/Y',
                            altFormats: 'd/m/Y|j/n/Y|j/n/y|m/j/y|n/d/y|m/j/Y|n/d/Y|d-m-y|d-m-Y|d/m|d-m|dm|dmy|dmY|d|Y-d-m|n-j|j/n',
                        },
                        {
                            xtype: 'datefield',
                            width: 120,
                            fieldLabel: '-',
                            labelAlign: 'right',
                            labelSeparator: ' ',
                            labelWidth: 15,
                            name: 'EndDate',
                            format: 'd/m/Y',
                            altFormats: 'd/m/Y|j/n/Y|j/n/y|m/j/y|n/d/y|m/j/Y|n/d/Y|d-m-y|d-m-Y|d/m|d-m|dm|dmy|dmY|d|Y-d-m|n-j|j/n',
                        }
                    ]
                }
            ],
            dockedItems: [
                {
                    xtype: 'toolbar',
                    dock: 'bottom',
                    width: 150,
                    layout: {
                        type: 'hbox',
                        pack: 'center'
                    },
                    items: [
                        {
                            xtype: 'button',
                            ui: 'default-small',
                            glyph: 'xf002@FontAwesome',
                            text: 'Search',
                            listeners: {
                                click: 'onButtonSearchClick'
                            }
                        }
                    ]
                }
            ]
        },
        {
            xtype: 'gridpanel',
            region: 'center',
            title: 'My Grid Panel',
            //store: 'creditApprovals',
            bind: {
                store: '{creditApprovals}',
            },
            forceFit: true,
            columns: [
                {
                    xtype: 'rownumberer',
                    text: 'No',
                    width: 30
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'Id',
                    text: 'Application No',
                },
                {
                    xtype: 'datecolumn',
                    dataIndex: 'ApproveDate',
                    text: 'วันที่อนุมัติ',
                    format: 'd/m/Y'
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'CustFullName',
                    text: 'ชื่อลูกค้า',
                    flex: -1
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'TypeLeasing',
                    text: 'ประเภทสินเชื่อ',
                    renderer: function (value) {
                        var result;

                        if (value) {
                            result = Ext.getStore('CommonData.typeLeasings').getById(value).get('Name');
                        }

                        return result;
                    }
                },
                {
                    xtype: 'numbercolumn',
                    dataIndex: 'CreditLimit',
                    text: 'วงเงิน'
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'AssetAmount',
                    text: 'จำนวนประเภททรัพย์สินที่ได้รับอนุมัติ'
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'Limit',
                    text: 'กำหนดวงเงิน',
                    renderer: function (value) {
                        var result;

                        if (value) {
                            result = Ext.getStore('CommonData.limits').getById(value).get('Name');
                        }

                        return result;
                    }
                },
                {
                    xtype: 'numbercolumn',
                    dataIndex: 'Total',
                    text: 'วงเงินที่ได้รับอนุมัติ(ทั้งหมด)'
                },
                {
                    xtype: 'numbercolumn',
                    dataIndex: 'Balance',
                    text: 'วงเงินคงเหลือที่สามารถเบิกใช้ได้'
                }
            ],
            dockedItems: [
                {
                    xtype: 'pagingtoolbar',
                    dock: 'bottom',
                    ui: 'footer',
                    width: 360,
                    displayInfo: true,
//                    store: 'creditApprovals'
                    bind: {
                        store: '{creditApprovals}',
                    },
                },
                {
                    xtype: 'toolbar',
                    dock: 'top',
                    items: [
                        {
                            xtype: 'button',
                            ui: 'default-small',
                            glyph: 'xf067@FontAwesome',
                            text: 'Add',
                            listeners: {
                                click: 'onButtonAddClick'
                            }
                        },
                        {
                            xtype: 'button',
                            ui: 'default-small',
                            glyph: 'xf014@FontAwesome',
                            text: 'Delete',
                            listeners: {
                                click: 'onButtonDeleteClick'
                            }
                        }
                    ]
                }
            ],
            listeners: {
                itemdblclick: 'onGridpanelItemDblClick'
            }
        }
    ]

});