/*
 * File: app/view/Job/Application/Tab/Insurance.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('TabUserInformation.view.Job.Application.Tab.Insurance', {
    extend: 'Ext.form.Panel',
    alias: 'widget.jobapplicationtabinsurance',

    requires: [
        'TabUserInformation.view.Job.Application.Tab.InsuranceViewModel',
        'TabUserInformation.view.Job.Application.Tab.InsuranceViewController',
        'Ext.tab.Panel',
        'Ext.form.Panel',
        'Ext.form.field.ComboBox',
        'Ext.grid.Panel',
        'Ext.grid.View',
        'Ext.toolbar.Paging',
        'Ext.grid.column.Column',
        'Ext.form.field.Date',
        'Ext.form.field.Number',
        'Ext.form.trigger.Trigger',
        'Ext.form.field.TextArea',
        'Ext.grid.plugin.RowEditing',
        'Ext.tab.Tab'
    ],

    controller: 'jobapplicationtabinsurance',
    viewModel: {
        type: 'jobapplicationtabinsurance'
    },
    id: 'jobappinsurance',
    bodyPadding: 10,
    title: 'Insurance',

    items: [
        {
            xtype: 'tabpanel',
            activeTab: 0,
            items: [
                {
                    xtype: 'panel',
                    layout: 'anchor',
                    title: 'Born by KTBL',
                    items: [
                        {
                            xtype: 'form',
                            bodyPadding: 10,
                            layout: {
                                type: 'table',
                                columns: 2
                            },
                            items: [
                                {
                                    xtype: 'combobox',
                                    width: 500,
                                    fieldLabel: 'Insurance Company',
                                    labelAlign: 'right',
                                    labelWidth: 150,
                                    name: 'InsuranceCompany',
                                    autoLoadOnValue: true,
                                    displayField: 'Name',
                                    store: 'CommonData.insuranceCompany',
                                    valueField: 'Id'
                                },
                                {
                                    xtype: 'combobox',
                                    fieldLabel: 'Payment Condition',
                                    labelAlign: 'right',
                                    labelWidth: 150,
                                    name: 'PaymentCondition',
                                    autoLoadOnValue: true,
                                    displayField: 'Name',
                                    store: 'CommonData.paymentCondition',
                                    valueField: 'Id'
                                },
                                {
                                    xtype: 'form',
                                    colspan: 2,
                                    layout: 'table',
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            width: 500,
                                            fieldLabel: 'Equipment 1',
                                            labelAlign: 'right',
                                            labelWidth: 150,
                                            name: 'Equipment1'
                                        },
                                        {
                                            xtype: 'combobox',
                                            fieldLabel: 'Borne By',
                                            labelAlign: 'right',
                                            labelWidth: 150,
                                            name: 'BorneBy1',
                                            autoLoadOnValue: true,
                                            displayField: 'Name',
                                            store: 'CommonData.borneBy',
                                            valueField: 'Id'
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'gridpanel',
                            reference: 'grid1',
                            height: 250,
                            store: 'insuranceEquipments',
                            dockedItems: [
                                {
                                    xtype: 'pagingtoolbar',
                                    dock: 'bottom',
                                    ui: 'footer',
                                    width: 360,
                                    displayInfo: true,
                                    store: 'insuranceEquipments'
                                },
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Add',
                                            listeners: {
                                                click: 'onButtonAddClick'
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Insert',
                                            listeners: {
                                                click: 'onButtonInsertClick'
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Delete',
                                            listeners: {
                                                click: 'onButtonDeleteClick'
                                            }
                                        }
                                    ]
                                }
                            ],
                            columns: [
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Chassis',
                                    text: 'Chassis',
                                    editor: {
                                        xtype: 'combobox',
                                        name: 'Chassis',
                                        autoLoadOnValue: true,
                                        displayField: 'Name',
                                        store: 'CommonData.chassis',
                                        valueField: 'Id'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Licens',
                                    text: 'Licens'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'StartDate',
                                    text: 'StartDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'StartDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'EndDate',
                                    text: 'EndDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'EndDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Rate',
                                    text: 'Rate',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Rate',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'SumInsured',
                                    text: 'SumInsured',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'SumInsured',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Premium',
                                    text: 'Premium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Premium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Territory',
                                    text: 'Territory',
                                    editor: {
                                        xtype: 'combobox',
                                        name: 'Territory',
                                        autoLoadOnValue: true,
                                        displayField: 'Name',
                                        store: 'CommonData.territory',
                                        valueField: 'Id'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Deductible',
                                    text: 'Deductible',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Deductible',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PaymentInsRate',
                                    text: 'PaymentInsRate',
                                    editor: {
                                        xtype: 'textfield',
                                        name: 'PaymentInsRate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Minimum',
                                    text: 'Minimum',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Minimum',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'ActualPremium',
                                    text: 'ActualPremium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'ActualPremium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'StampDuty',
                                    text: 'StampDuty',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'StampDuty',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Discount',
                                    text: 'Discount',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Discount',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'NetPremium',
                                    text: 'NetPremium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'NetPremium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PaidPream',
                                    text: 'PaidPream',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'PaidPream',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PolicyNo',
                                    text: 'PolicyNo',
                                    editor: {
                                        xtype: 'textfield',
                                        itemId: 'policyno',
                                        triggers: {
                                            mytrigger: {
                                                handler: function(field, trigger, e) {
                                                    var grid = field.up('grid'),
                                                        record = grid.getSelection()[0],
                                                        rowedit = grid.getPlugin('rowedit');

                                                    if(e.type == 'click'){
                                                        var popup = Ext.create('widget.jobapplicationwindowinsurancepolicy', {
                                                            listeners: {
                                                                close: function (panel, eOpts) {
                                                                    var record2 = panel.down('grid').getSelection()[0];
                                                                    if(record2){
                                                                        for(var recordname in record2.data){
                                                                            if(recordname != 'Id'){
                                                                                record.set(recordname,record2.get(recordname));
                                                                            }
                                                                            if(recordname == 'PolicyNo'){

                                                                            }
                                                                        }
                                                                        grid.view.refresh();
                                                                        rowedit.cancelEdit();
                                                                    }
                                                                }
                                                            }
                                                        });
                                                        popup.show();
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'ReceivedDate',
                                    text: 'ReceivedDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'ReceivedDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PayDate',
                                    text: 'PayDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'PayDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Remark',
                                    text: 'Remark',
                                    editor: {
                                        xtype: 'textareafield',
                                        name: 'Remark'
                                    }
                                }
                            ],
                            plugins: [
                                {
                                    ptype: 'rowediting',
                                    pluginId: 'rowedit',
                                    listeners: {
                                        edit: 'onRowEditingEdit'
                                    }
                                }
                            ]
                        },
                        {
                            xtype: 'form',
                            layout: 'table',
                            bodyPadding: 10,
                            items: [
                                {
                                    xtype: 'textfield',
                                    width: 500,
                                    fieldLabel: 'Equipment 2',
                                    labelAlign: 'right',
                                    labelWidth: 150,
                                    name: 'Equipment2'
                                },
                                {
                                    xtype: 'combobox',
                                    fieldLabel: 'Borne By',
                                    labelAlign: 'right',
                                    labelWidth: 150,
                                    name: 'BorneBy2',
                                    autoLoadOnValue: true,
                                    displayField: 'Name',
                                    store: 'CommonData.borneBy',
                                    valueField: 'Id'
                                }
                            ]
                        },
                        {
                            xtype: 'gridpanel',
                            reference: 'grid2',
                            height: 250,
                            store: 'insuranceEquipments2',
                            dockedItems: [
                                {
                                    xtype: 'pagingtoolbar',
                                    dock: 'bottom',
                                    ui: 'footer',
                                    width: 360,
                                    displayInfo: true,
                                    store: 'insuranceEquipments'
                                },
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Add',
                                            listeners: {
                                                click: 'onButtonAddClick1'
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Insert',
                                            listeners: {
                                                click: 'onButtonInsertClick1'
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Delete',
                                            listeners: {
                                                click: 'onButtonDeleteClick1'
                                            }
                                        }
                                    ]
                                }
                            ],
                            columns: [
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Chassis',
                                    text: 'Chassis',
                                    editor: {
                                        xtype: 'combobox',
                                        name: 'Chassis',
                                        autoLoadOnValue: true,
                                        displayField: 'Name',
                                        store: 'CommonData.chassis',
                                        valueField: 'Id'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Licens',
                                    text: 'Licens'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'StartDate',
                                    text: 'StartDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'StartDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'EndDate',
                                    text: 'EndDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'EndDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Rate',
                                    text: 'Rate',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Rate',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'SumInsured',
                                    text: 'SumInsured',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'SumInsured',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Premium',
                                    text: 'Premium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Premium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Territory',
                                    text: 'Territory',
                                    editor: {
                                        xtype: 'combobox',
                                        name: 'Territory',
                                        autoLoadOnValue: true,
                                        displayField: 'Name',
                                        store: 'CommonData.territory',
                                        valueField: 'Id'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Deductible',
                                    text: 'Deductible',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Deductible',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PaymentInsRate',
                                    text: 'PaymentInsRate',
                                    editor: {
                                        xtype: 'textfield',
                                        name: 'PaymentInsRate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Minimum',
                                    text: 'Minimum',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Minimum',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'ActualPremium',
                                    text: 'ActualPremium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'ActualPremium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'StampDuty',
                                    text: 'StampDuty',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'StampDuty',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Discount',
                                    text: 'Discount',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Discount',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'NetPremium',
                                    text: 'NetPremium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'NetPremium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PaidPream',
                                    text: 'PaidPream',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'PaidPream',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PolicyNo',
                                    text: 'PolicyNo',
                                    editor: {
                                        xtype: 'textfield',
                                        itemId: 'policyno',
                                        triggers: {
                                            mytrigger: {
                                                handler: function(field, trigger, e) {
                                                    var grid = field.up('grid'),
                                                        record = grid.getSelection()[0],
                                                        rowedit = grid.getPlugin('rowedit');

                                                    if(e.type == 'click'){
                                                        var popup = Ext.create('widget.jobapplicationwindowinsurancepolicy', {
                                                            listeners: {
                                                                close: function (panel, eOpts) {
                                                                    var record2 = panel.down('grid').getSelection()[0];
                                                                    if(record2){
                                                                        for(var recordname in record2.data){
                                                                            if(recordname != 'Id'){
                                                                                record.set(recordname,record2.get(recordname));
                                                                            }
                                                                            if(recordname == 'PolicyNo'){

                                                                            }
                                                                        }
                                                                        grid.view.refresh();
                                                                        rowedit.cancelEdit();
                                                                    }
                                                                }
                                                            }
                                                        });
                                                        popup.show();
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'ReceivedDate',
                                    text: 'ReceivedDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'ReceivedDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PayDate',
                                    text: 'PayDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'PayDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Remark',
                                    text: 'Remark',
                                    editor: {
                                        xtype: 'textareafield',
                                        name: 'Remark'
                                    }
                                }
                            ],
                            plugins: [
                                {
                                    ptype: 'rowediting',
                                    pluginId: 'rowedit',
                                    listeners: {
                                        edit: 'onRowEditingEdit3'
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    title: 'Born By Customer',
                    items: [
                        {
                            xtype: 'gridpanel',
                            reference: 'grid3',
                            height: 250,
                            store: 'insuranceEquipments2',
                            dockedItems: [
                                {
                                    xtype: 'pagingtoolbar',
                                    dock: 'bottom',
                                    ui: 'footer',
                                    width: 360,
                                    displayInfo: true,
                                    store: 'insuranceEquipments'
                                },
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Add',
                                            listeners: {
                                                click: 'onButtonAddClick11'
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Insert',
                                            listeners: {
                                                click: 'onButtonInsertClick11'
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            ui: 'default-small',
                                            text: 'Delete',
                                            listeners: {
                                                click: 'onButtonDeleteClick11'
                                            }
                                        }
                                    ]
                                }
                            ],
                            columns: [
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Chassis',
                                    text: 'Chassis',
                                    editor: {
                                        xtype: 'combobox',
                                        name: 'Chassis',
                                        autoLoadOnValue: true,
                                        displayField: 'Name',
                                        store: 'CommonData.chassis',
                                        valueField: 'Id'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Licens',
                                    text: 'Licens'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'StartDate',
                                    text: 'StartDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'StartDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'EndDate',
                                    text: 'EndDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'EndDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Rate',
                                    text: 'Rate',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Rate',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'SumInsured',
                                    text: 'SumInsured',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'SumInsured',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Premium',
                                    text: 'Premium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Premium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Territory',
                                    text: 'Territory',
                                    editor: {
                                        xtype: 'combobox',
                                        name: 'Territory',
                                        autoLoadOnValue: true,
                                        displayField: 'Name',
                                        store: 'CommonData.territory',
                                        valueField: 'Id'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Deductible',
                                    text: 'Deductible',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Deductible',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PaymentInsRate',
                                    text: 'PaymentInsRate',
                                    editor: {
                                        xtype: 'textfield',
                                        name: 'PaymentInsRate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Minimum',
                                    text: 'Minimum',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Minimum',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'ActualPremium',
                                    text: 'ActualPremium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'ActualPremium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'StampDuty',
                                    text: 'StampDuty',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'StampDuty',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Discount',
                                    text: 'Discount',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'Discount',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'NetPremium',
                                    text: 'NetPremium',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'NetPremium',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PaidPream',
                                    text: 'PaidPream',
                                    editor: {
                                        xtype: 'numberfield',
                                        name: 'PaidPream',
                                        hideTrigger: true
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PolicyNo',
                                    text: 'PolicyNo',
                                    editor: {
                                        xtype: 'textfield',
                                        itemId: 'policyno',
                                        triggers: {
                                            mytrigger: {
                                                handler: function(field, trigger, e) {
                                                    var grid = field.up('grid'),
                                                        record = grid.getSelection()[0],
                                                        rowedit = grid.getPlugin('rowedit');

                                                    if(e.type == 'click'){
                                                        var popup = Ext.create('widget.jobapplicationwindowinsurancepolicy', {
                                                            listeners: {
                                                                close: function (panel, eOpts) {
                                                                    var record2 = panel.down('grid').getSelection()[0];
                                                                    if(record2){
                                                                        for(var recordname in record2.data){
                                                                            if(recordname != 'Id'){
                                                                                record.set(recordname,record2.get(recordname));
                                                                            }
                                                                            if(recordname == 'PolicyNo'){

                                                                            }
                                                                        }
                                                                        grid.view.refresh();
                                                                        rowedit.cancelEdit();
                                                                    }
                                                                }
                                                            }
                                                        });
                                                        popup.show();
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'ReceivedDate',
                                    text: 'ReceivedDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'ReceivedDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PayDate',
                                    text: 'PayDate',
                                    editor: {
                                        xtype: 'datefield',
                                        name: 'PayDate'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Remark',
                                    text: 'Remark',
                                    editor: {
                                        xtype: 'textareafield',
                                        name: 'Remark'
                                    }
                                }
                            ],
                            plugins: [
                                {
                                    ptype: 'rowediting',
                                    pluginId: 'rowedit',
                                    listeners: {
                                        edit: 'onRowEditingEdit31'
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ],
    dockedItems: [
        {
            xtype: 'form',
            dock: 'bottom',
            bodyPadding: 10,
            items: [
                {
                    xtype: 'textfield',
                    width: 600,
                    fieldLabel: 'Except for Equipment',
                    labelAlign: 'right',
                    labelWidth: 150,
                    name: 'ExceptEquipment'
                },
                {
                    xtype: 'textareafield',
                    width: 600,
                    fieldLabel: 'Remark',
                    labelAlign: 'right',
                    labelWidth: 150,
                    name: 'Remark'
                }
            ]
        }
    ]

});