/*
 * File: app/view/Job/Application/Tab/GuarantorViewController.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('TabUserInformation.view.Job.Application.Tab.GuarantorViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.jobapplicationtabguarantor',

    onButtonAddtionSalePriceClick: function(button, e, eOpts) {
        var popup = Ext.create('widget.jobapplicationwindowadditionsaleprice');
        popup.show();
    },

    onButtonSigner1Click: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.getForm();

        var popup = Ext.create('widget.thirdpartythirdpartyinfpopup', {
            listeners: {
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        var name = record2.get('TitleNameEn')+' '+
//                        record2.get('FirstNameEn')+' '+
                        record2.get('NameEn');

                        form.findField('Signer1EquipmentSales').setValue(name);
                    }
                }
            }
        });
        popup.show();
    },

    onButtonSigner2Click: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.getForm();

        var popup = Ext.create('widget.thirdpartythirdpartyinfpopup', {
            listeners: {
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        var name = record2.get('TitleNameEn')+' '+
//                        record2.get('FirstNameEn')+' '+
                        record2.get('NameEn');

                        form.findField('Signer2EquipmentSales').setValue(name);
                    }
                }
            }
        });
        popup.show();
    },

    onButtonWithnessClick: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.getForm();

        var popup = Ext.create('widget.thirdpartythirdpartyinfpopup', {
            listeners: {
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        var name = record2.get('TitleNameEn')+' '+
//                        record2.get('FirstNameEn')+' '+
                        record2.get('NameEn');

                        form.findField('WithnessEquipmentSales').setValue(name);
                    }
                }
            }
        });
        popup.show();
    },

    onButtonAddressEqpClick: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.getForm();

        var popup = Ext.create('widget.thirdpartythirdpartyinfpopup', {
            listeners: {
                beforerender: function (panel, eOpts) {
                    panel.getController().HideAndShow('AddressEqp');
                },
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        form.findField('AddressEquipmentSales').setValue(record2.get('AddressEng1'));
                    }
                }
            }
        });
        popup.show();
    },

    onGridpanelSelectionChange: function(model, selected, eOpts) {
        if(selected[0]){
            this.getView().down('#companyperson').getForm().loadRecord(selected[0]);
        }
    },

    onCheckboxfieldChange: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            this.getView().down('#person').hide();
            this.getView().down('#company').show();
        }else{
            this.getView().down('#company').hide();
            this.getView().down('#person').show();
        }
    },

    onButtonNameClick: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.getForm();

        var popup = Ext.create('widget.thirdpartythirdpartyinfpopup', {
            listeners: {
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        form.findField('Name').setValue(record2.get('NameTh'));
                    }
                }
            }
        });
        popup.show();
    },

    onButtonAddressClick: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.getForm();

        var popup = Ext.create('widget.thirdpartythirdpartyinfpopup', {
            listeners: {
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        form.findField('Address').setValue(record2.get('AddressTh1'));
                    }
                }
            }
        });
        popup.show();
    },

    onButtonSigner1CompanyClick: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.getForm();

        var popup = Ext.create('widget.thirdpartythirdpartyinfpopup', {
            listeners: {
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        var name = record2.get('TitleNameTh')+' '+
                        record2.get('NameTh');

                        form.findField('Signer1').setValue(name);
                    }
                }
            }
        });
        popup.show();
    },

    onButtonSigner2CompanyClick: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.getForm();

        var popup = Ext.create('widget.thirdpartythirdpartyinfpopup', {
            listeners: {
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        var name = record2.get('TitleNameTh')+' '+
                        record2.get('NameTh');

                        form.findField('Signer2').setValue(name);
                    }
                }
            }
        });
        popup.show();
    },

    onButtonPersonClick: function(button, e, eOpts) {
        var view = this.getView(),
            form = view.down('#companyperson').getForm();

        var popup = Ext.create('widget.customercusinfpopup', {
            listeners: {
                close: function (panel, eOpts) {
                    var record2 = panel.down('gridpanel').getSelection()[0];
                    if(record2){
                        form.findField('Person1').setValue(record2.get('CustomerThaiName'));
                        form.findField('Position').setValue(record2.get('Position1'));
                        form.findField('AddressPerson').setValue(record2.get('Address1'));
                    }
                }
            }
        });
        popup.show();
    },

    onButtonAddClick: function(button, e, eOpts) {

    },

    onButtonInsertClick: function(button, e, eOpts) {

    },

    onButtonDeleteClick: function(button, e, eOpts) {

    },

    onStoreBeforeLoad: function (store, operation, eOpts) {
        var Id = Ext.decode(sessionStorage.getItem('AppDetail')).Id;
        store.getProxy().extraParams.id = Id;
        store.getProxy().extraParams.name = 'GuarantorList';
    }

});
